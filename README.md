# **Log Viewer**

Log Viewer - это веб-приложение, разработанное с использованием Vue.js и Quasar Framework, предназначенное для просмотра, фильтрации и поиска логов в реальном времени.

## **Функциональные возможности**

- **Просмотр логов**: Отображение логов в виде прокручиваемого списка.
- **Фильтрация логов**: Фильтрация по уровням логов (`ERROR`, `DEBUG`, `TRACE`).
- **Поиск по логам**: Поиск сообщений с подсветкой совпадений.
- **Навигация по результатам поиска**: Перемещение между результатами поиска (предыдущее/следующее).

## **Структура проекта**

### **Компоненты**

- **`LogFilter`**: Компонент для фильтрации логов по уровням.
  - **Функционал**: Применение фильтров и сброс фильтров.
  - **Пропсы**:
    - `levels` (Массив уровней логов)
  - **События**:
    - `filter` (Событие при выборе уровня фильтра)
    - `reset-filters` (Событие при сбросе фильтров)

- **`LogSearch`**: Компонент для поиска по логам.
  - **Функционал**: Поиск по сообщениям, навигация между совпадениями.
  - **Пропсы**:
    - `searchText` (Текст для поиска)
    - `matches` (Массив индексов совпадений)
    - `currentMatchIndex` (Индекс текущего совпадения)
  - **События**:
    - `updateSearch` (Событие при изменении текста поиска)
    - `updateMatches` (Событие при изменении текущего совпадения)

- **`LogsViewer`**: Основной компонент для отображения логов.
  - **Функционал**: Отображение и фильтрация логов, поддержка поиска и прокрутки.
  - **Пропсы**:
    - `initialLogs` (Начальные данные логов)
    - `defaultSearchText` (Текст по умолчанию для поиска)

### **Страницы**

- **`PageLogin`**: Страница входа в систему.
  - **Функционал**: Аутентификация пользователей.
  - **Пропсы**: Нет
  - **События**: Нет

- **`PageHome`**: Основная страница после входа.
  - **Функционал**: Просмотр и управление логами.
  - **Пропсы**: Нет
  - **События**: Нет

## **WAMP**

В этом проекте используется WebSocket-протокол для взаимодействия с сервером WAMP (Web Application Messaging Protocol). Это позволяет приложению получать обновления в реальном времени.

### **Класс `WampService`**

Класс `WampService` управляет соединением WebSocket с сервером WAMP и выполняет следующие функции:

- **Установка соединения**: `connect()`
  - Устанавливает соединение WebSocket и обрабатывает события открытия, получения сообщений, закрытия и ошибок.

- **Авторизация**: `login(username: string, password: string)` и `loginByToken(token: string)`
  - Выполняет авторизацию пользователя по имени пользователя и паролю или по токену.

- **Подписка на логи**: `subscribeToLogs(callback: (event: any) => void)`
  - Подписывается на обновления логов и передает их в указанную функцию обратного вызова.

- **Выход из системы**: `logout()`
  - Завершает сессию пользователя.

- **Управление соединением**:
  - `startPing()` - Отправляет периодические пинги для поддержания соединения.
  - `disconnect()` - Закрывает соединение WebSocket.

**Пример использования:**

```typescript
import { WampService } from './path/to/WampService'

const wampService = new WampService(process.env.VUE_APP_WAMP as string)

wampService.connect()
  .then(() => wampService.login('username', 'password'))
  .then(response => console.log('Logged in:', response))
  .catch(error => console.error('Error:', error))
```
### **Переменные окружения**

**Создайте файл .env в корне проекта и добавьте следующие переменные:**
```
VUE_APP_BASE_URL=/
VUE_APP_API_URL=http://enter.local/
VUE_APP_WAMP=ws://test.enter-systems.ru/
```
- **`VUE_APP_BASE_URL`**:Базовый URL для маршрутизации вашего приложения.
- - **`VUE_APP_API_URL`**: URL API для взаимодействия с сервером.
- - **`VUE_APP_WAMP`**: WebSocket URL для реального времени.

### **Установка и настройка**

- **Клонируйте репозиторий:**:
  - `git clone https://github.com/Aleksstepanov/test-logs.git
     cd test-logs`
- **Установите зависимости:**:
-   - `npm install`
- **Создайте файл .env в корне проекта и добавьте переменные окружения, как указано выше.**:

### **Запуск проекта**
**Для запуска проекта в режиме разработки выполните следующую команду:**
`npm run serve`
Приложение будет доступно по адресу http://localhost:8080/.

### **Сборка проекта**
**Для сборки проекта для продакшена используйте команду:**
`npm run build`
Файлы сборки будут размещены в директории dist.

### **Скрипты проекта**
- `npm run serve`- Запускает сервер разработки.
- `npm run build`- Собирает проект для продакшена.
- `npm run lint`- Запускает линтер для проверки кода.
